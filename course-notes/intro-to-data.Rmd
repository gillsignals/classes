---
title: "Untitled"
author: "Amy Gill"
date: "November 2, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



```{r}
library(openintro)
library(tidyverse)
data(hsb2)
str(hsb2)
```

The `droplevels` function removes unused levels from factors, which can help make visualization and other tasks easier.

Wrapping a line in parentheses will print the output in addition to evaluating the statement.
```{r}
(avg_read <- mean(hsb2$read))
```

*Discretizing* is converting a numerical variable to categorical variable according to certain rules. Consider converting reading scores from numerical to below/at-or-above average. We can do that with `ifelse(logical_test, if-true, if-false)`

```{r}
# Calculate median number of characters: med_num_char
med_num_char <- median(email50$num_char)

# Create num_char_cat variable in email50
email50_fortified <- email50 %>%
  mutate(num_char_cat = ifelse(num_char < med_num_char, "below median", "at or above median"))
  
# Count emails in each category
email50_fortified %>%
  count(num_char_cat)
```
```{r}
# Create number_yn column in email50
email50_fortified <- email50 %>%
  mutate(
    number_yn = case_when(
      # if number is "none", make number_yn "no"
      number == "none" ~ "no", 
      # if number is not "none", make number_yn "yes"
      number != "none" ~ "yes"  
    )
  )
  

# Visualize the distribution of number_yn
ggplot(email50_fortified, aes(x = number_yn)) +
  geom_bar()
```
```{r}
library(ggplot2)

ggplot(data = hsb2, aes(x = science, y = math)) +
  geom_point()
```

Studies can be observational or experimental. In *observational* studies, subjects are observed in such a way that there is no interference in their behavior, and correlation but not causation can be inferred. In *experimental* studies, subjects are randomly assigned to different groups and causation can be inferred because there has been control of the non-experimental variables.

The scope of inference that is acceptable also relies on study design. If the sample is pulled from the general population by *random sampling*, then the inferences are generalizable to the whole population. If groups are determined by *random assignment*, as in an experimental study, then inferences about causation can be made.

A study can be any independent combination of random sampling and random assignment. For example, a study with random assignment but no random sampling supports causal inferences but they are not generalizable, and a study with both random assignment and random sampling supports inferences that are both causal and generalizable. 

In practice, it is difficult to do both random assignment and random sampling - if a large enough representative random sample is chosen, then it will be logistically difficult to impose assigned groups effectively.

A typical experimental study that takes volunteers and then assigns groups is a random assignment of a nonrandom sample and supports causal but non-generalizable statements. A typical observational study that takes a random sample of the population and analyzes existing differences rather than assigning groups supports generalizable correlational inferences but not inferences about causation.

A suboptimal study will be neither randomly assigned or sampled, which makes it difficult to draw meaningful conclusions as one cannot infer causation or any generalizable statement. Consider a study on hospitalized patients (non-random sample) analyzing smoking status and comparing patients who do or do not have lung cancer (non-random assignment).

```{r}
# Load packages
library(dplyr)

# Count number of male and female applicants admitted
ucb_admit %>%
  count(Gender, Admit)
```

